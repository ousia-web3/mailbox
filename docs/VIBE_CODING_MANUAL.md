# 🎯 바이브 코딩 단계별 프롬프트 매뉴얼
## 하나투어 뉴스레터 자동화 시스템 구현 가이드

### 📋 프로젝트 개요
- **프로젝트명**: [IT본부] 하나투어 뉴스레터 자동화 시스템
- **목적**: IT, AI, 여행 관련 뉴스를 자동 수집하여 GPT-4o-mini로 요약 후 이메일 발송
- **기술 스택**: Python, Flask, Selenium, OpenAI API, 네이버 뉴스 API
- **특징**: 웹 대시보드, 스케줄러, 에러 복구, 수신자 관리 시스템

---

## 🚀 1단계: 프로젝트 초기 설정 및 환경 구성

### 1-1. 프로젝트 기본 구조 생성
```
프로젝트 루트 폴더를 생성하고 다음 구조로 설정해주세요:

mailbox/
├── docs/                    # 문서 폴더
├── logs/                    # 로그 폴더
├── static/                  # 정적 파일
│   └── linear/             # CSS 테마
├── templates/              # HTML 템플릿
├── .env                    # 환경 변수 (실제 값)
├── .env.example           # 환경 변수 템플릿
├── requirements.txt       # Python 의존성
├── README.md              # 프로젝트 문서
└── windows_utf8.py        # Windows UTF-8 설정
```

### 1-2. 환경 변수 설정 파일 생성
```
.env.example 파일을 생성하고 다음 내용을 포함해주세요:

# OpenAI API 설정
OPENAI_API_KEY=your_openai_api_key_here

# 네이버 API 설정 (선택사항)
NAVER_CLIENT_ID=your_naver_client_id_here
NAVER_CLIENT_SECRET=your_naver_client_secret_here

# 이메일 설정
EMAIL_SENDER=your_email@outlook.com
EMAIL_PASSWORD=your_app_password_or_regular_password
EMAIL_RECEIVER=receiver1@example.com,receiver2@example.com

# 뉴스레터 설정
NEWSLETTER_TITLE=[IT본부] 하나투어 뉴스레터
MAX_ARTICLES_PER_TOPIC=10
MAX_TOPICS=5
```

### 1-3. Python 의존성 설정
```
requirements.txt 파일을 생성하고 다음 패키지들을 포함해주세요:

selenium==4.34.2
webdriver-manager==4.0.2
python-dotenv==1.1.1
requests==2.32.4
beautifulsoup4==4.13.4
openai==1.97.1
schedule==1.2.2
```

---

## 🔧 2단계: 핵심 시스템 컴포넌트 구현

### 2-1. Windows UTF-8 설정 모듈
```
windows_utf8.py 파일을 생성하고 Windows 환경에서 한글이 정상적으로 표시되도록 UTF-8 설정을 구현해주세요.

주요 기능:
- Windows 콘솔 UTF-8 인코딩 설정
- 로케일 설정
- 환경 변수 설정
```

### 2-2. 로깅 설정 모듈
```
logging_config.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- UTF-8 로깅 설정
- 파일별 로그 분리
- 로그 레벨 설정
- 로그 포맷 설정
```

### 2-3. 보안 설정 모듈
```
security_config.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- 환경 변수 검증
- Flask Secret Key 자동 생성
- 보안 설정 검증
- API 키 유효성 검사
```

---

## 📰 3단계: 뉴스 수집 시스템 구현

### 3-1. 키워드 관리 시스템
```
keyword_manager.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- 키워드 설정 파일 관리 (keywords_config.json)
- 주제별 키워드 그룹화 (IT 35%, AI 35%, 여행 30%)
- 키워드 추가/수정/삭제 기능
- 키워드 검증 기능

키워드 구성:
IT 분야: AI 인프라, 양자 컴퓨팅, 엣지컴퓨팅, 6G 네트워크, 하이브리드 컴퓨팅
AI 분야: 에이전틱 AI, 멀티모달 AI, 온디바이스 AI, 초개인화 AI, AI 거버넌스
여행 분야: 하나투어, 모두투어, 마이리얼트립, 교원투어, 여기어때, 야놀자, 에어비앤비, 문체부, 패키지여행
```

### 3-2. 뉴스 수집기 구현
```
news_collector_working.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- 네이버 뉴스 API를 통한 뉴스 수집
- Selenium을 통한 웹 스크래핑 (백업)
- 키워드별 뉴스 검색
- 중복 제거 및 필터링
- 에러 처리 및 재시도 로직
- 수집 제한 및 대기 시간 설정

수집 정책:
- 키워드별 5개 기사 수집
- 주제별 최대 10개로 제한
- 최신순 정렬
- 5초 간격으로 API 호출
```

### 3-3. 뉴스 요약 시스템
```
news_summarizer.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- GPT-4o-mini를 통한 뉴스 요약
- 개별 기사 요약 (200자 이내)
- 주제별 종합 요약 (200자 이내)
- PICK 요약 기능 (3-5개 핵심 포인트)
- 요약 품질 검증
- 재시도 로직 및 에러 처리

요약 설정:
- 최대 토큰: 500 (개별), 300 (종합)
- 온도: 0.3 (일관성 보장)
- 타임아웃: 30초
- 재시도: 최대 3회
```

---

## 📧 4단계: 이메일 발송 시스템 구현

### 4-1. 이메일 발송기 구현
```
email_sender.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- SMTP를 통한 이메일 발송
- HTML 형식 뉴스레터 생성
- 다중 수신자 지원
- 첨부파일 지원
- 발송 상태 추적
- 에러 처리 및 재시도

이메일 설정:
- Microsoft Outlook 또는 Gmail 지원
- 앱 비밀번호 사용 (Gmail)
- HTML 템플릿 기반 발송
```

### 4-2. 수신자 관리 시스템
```
recipient_manager.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- JSON 기반 수신자 데이터 관리
- 단일/대량 수신자 추가/제거
- 이메일 형식 검증
- 수신자 검색 기능
- 통계 정보 제공
- .env 파일 동기화

데이터 구조:
- recipients.json: 수신자 목록
- test_recipients.json: 테스트용 수신자
```

---

## 🌐 5단계: 웹 대시보드 구현

### 5-1. Flask 웹 애플리케이션
```
web_app.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- Flask 기반 웹 서버
- 뉴스레터 수동 실행
- 실시간 상태 모니터링
- 수신자 관리 인터페이스
- 로그 뷰어
- 설정 관리

API 엔드포인트:
- /: 메인 대시보드
- /api/status: 시스템 상태
- /api/run: 뉴스레터 실행
- /api/recipients: 수신자 관리
- /recipients: 수신자 관리 페이지
```

### 5-2. 웹 템플릿 구현
```
templates/ 폴더에 다음 HTML 파일들을 생성해주세요:

1. index.html - 메인 대시보드
   - 시스템 상태 표시
   - 뉴스레터 실행 버튼
   - 최근 로그 표시
   - 수신자 관리 링크

2. recipients.html - 수신자 관리 페이지
   - 수신자 목록 표시
   - 추가/삭제 기능
   - 검색 기능
   - 대량 추가 기능

3. preview.html - 뉴스레터 미리보기
   - HTML 형식 뉴스레터 표시
   - 발송 전 확인 기능
```

### 5-3. CSS 스타일링
```
static/linear/linear-theme.css 파일을 생성하고 다음 스타일을 구현해주세요:

주요 스타일:
- 모던한 디자인
- 반응형 레이아웃
- 다크/라이트 테마
- 애니메이션 효과
- 사용자 친화적 UI
```

---

## ⚙️ 6단계: 메인 시스템 통합

### 6-1. 뉴스레터 시스템 통합
```
newsletter_system.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- 모든 컴포넌트 통합
- 뉴스 수집 → 요약 → 발송 파이프라인
- 비율 기반 뉴스 수집 (IT 35%, AI 35%, 여행 30%)
- 에러 복구 및 Fallback 메커니즘
- 로깅 및 모니터링

시스템 플로우:
1. 키워드별 뉴스 수집
2. 중복 제거 및 필터링
3. AI 요약 생성
4. HTML 뉴스레터 생성
5. 이메일 발송
6. 결과 로깅
```

### 6-2. 에러 복구 시스템
```
error_recovery.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- 함수 재시도 데코레이터
- Fallback 메커니즘
- 에러 로깅 및 추적
- 자동 복구 로직
- 시스템 안정성 보장
```

---

## 🔄 7단계: 자동화 및 스케줄링

### 7-1. 배치 파일 생성
```
다음 배치 파일들을 생성해주세요:

1. start_newsletter.bat - 뉴스레터 시작
2. run_newsletter.bat - 뉴스레터 실행
3. setup_task_scheduler.ps1 - Windows 작업 스케줄러 설정

주요 기능:
- 자동 실행 스크립트
- 환경 설정
- 에러 처리
- 로그 관리
```

### 7-2. PICK 요약 토글 기능
```
toggle_pick_summary.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- PICK 요약 기능 활성화/비활성화
- 설정 파일 관리
- 실시간 설정 변경
- 기본값 복원
```

---

## 📊 8단계: 테스트 및 검증

### 8-1. 시스템 테스트
```
다음 테스트를 수행해주세요:

1. 뉴스 수집 테스트
   - 키워드별 수집 확인
   - 중복 제거 확인
   - 수량 제한 확인

2. 요약 시스템 테스트
   - 개별 요약 품질 확인
   - 종합 요약 품질 확인
   - PICK 요약 확인

3. 이메일 발송 테스트
   - HTML 형식 확인
   - 수신자 전송 확인
   - 첨부파일 확인

4. 웹 대시보드 테스트
   - 페이지 로딩 확인
   - API 응답 확인
   - 실시간 업데이트 확인
```

### 8-2. 성능 최적화
```
다음 최적화를 수행해주세요:

1. 메모리 사용량 최적화
2. API 호출 최적화
3. 데이터베이스 쿼리 최적화
4. 웹 페이지 로딩 속도 개선
```

---

## 📚 9단계: 문서화 및 사용법

### 9-1. README.md 작성
```
README.md 파일을 작성하고 다음 내용을 포함해주세요:

1. 프로젝트 개요
2. 주요 기능 설명
3. 설치 및 설정 가이드
4. 사용법
5. API 참조
6. 문제 해결 가이드
7. 성능 최적화 팁
```

### 9-2. API 문서 작성
```
docs/ 폴더에 API 문서를 작성해주세요:

1. 웹 API 엔드포인트 문서
2. 클래스 및 함수 문서
3. 설정 파일 설명
4. 에러 코드 설명
```

---

## 🎯 10단계: 최종 검증 및 배포

### 10-1. 최종 시스템 검증
```
다음 검증을 수행해주세요:

1. 전체 시스템 통합 테스트
2. 성능 테스트
3. 보안 검증
4. 사용자 경험 테스트
5. 에러 시나리오 테스트
```

### 10-2. 배포 준비
```
다음 배포 준비를 수행해주세요:

1. 환경 변수 설정 확인
2. 의존성 설치 확인
3. 로그 폴더 권한 확인
4. 백업 설정 확인
5. 모니터링 설정 확인
```

---

## 📋 프롬프트 사용 가이드

### 기본 프롬프트 구조
```
[단계 번호] [파일명] [기능명] 구현

예시:
"2-1. windows_utf8.py 파일을 생성하고 Windows 환경에서 한글이 정상적으로 표시되도록 UTF-8 설정을 구현해주세요."
```

### 상세 프롬프트 예시
```
"3-1. keyword_manager.py 파일을 생성하고 다음 기능을 구현해주세요:

주요 기능:
- 키워드 설정 파일 관리 (keywords_config.json)
- 주제별 키워드 그룹화 (IT 35%, AI 35%, 여행 30%)
- 키워드 추가/수정/삭제 기능
- 키워드 검증 기능

키워드 구성:
IT 분야: AI 인프라, 양자 컴퓨팅, 엣지컴퓨팅, 6G 네트워크, 하이브리드 컴퓨팅
AI 분야: 에이전틱 AI, 멀티모달 AI, 온디바이스 AI, 초개인화 AI, AI 거버넌스
여행 분야: 하나투어, 모두투어, 마이리얼트립, 교원투어, 여기어때, 야놀자, 에어비앤비, 문체부, 패키지여행"
```

### 검증 프롬프트 예시
```
"8-1. 시스템 테스트를 수행해주세요:

1. 뉴스 수집 테스트
   - 키워드별 수집 확인
   - 중복 제거 확인
   - 수량 제한 확인

2. 요약 시스템 테스트
   - 개별 요약 품질 확인
   - 종합 요약 품질 확인
   - PICK 요약 확인

3. 이메일 발송 테스트
   - HTML 형식 확인
   - 수신자 전송 확인
   - 첨부파일 확인

4. 웹 대시보드 테스트
   - 페이지 로딩 확인
   - API 응답 확인
   - 실시간 업데이트 확인"
```

---

## ⚠️ 주의사항

### 기존 시스템 호환성
- 기존 등록된 설정값과 정보는 반드시 유지
- 수정 및 추가 기능 요청시 마지막으로 작업된 소스 영향도는 최소화
- 환경 변수 및 설정 파일 백업 필수

### 보안 고려사항
- API 키는 환경 변수로 관리
- 민감한 정보는 .env 파일에 저장
- .env 파일은 .gitignore에 포함
- 로그 파일에 민감한 정보 노출 금지

### 성능 고려사항
- API 호출 제한 준수
- 메모리 사용량 최적화
- 로그 파일 크기 관리
- 데이터베이스 쿼리 최적화

---

## 📞 지원 및 문의

### 문제 해결
1. 로그 파일 확인 (logs/ 폴더)
2. 환경 변수 설정 확인
3. 의존성 설치 확인
4. 네트워크 연결 확인

### 추가 기능 요청
- 기존 구조 유지
- 호환성 보장
- 문서화 필수
- 테스트 코드 포함

---

**📝 작성일**: 2025-01-02  
**📝 작성자**: AI Assistant  
**📝 버전**: 1.0  
**📝 프로젝트**: [IT본부] 하나투어 뉴스레터 자동화 시스템

