<!DOCTYPE html>
<html lang="ko">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>뉴스레터 발송 프로세스 상세 가이드</title>
    <style>
        body {
            font-family: 'Apple SD Gothic Neo', 'Malgun Gothic', sans-serif;
            line-height: 1.6;
            color: #333;
            max-width: 800px;
            margin: 0 auto;
            padding: 20px;
            background-color: #f9f9f9;
            font-size: 14px;
        }
        h1 {
            color: #2c3e50;
            border-bottom: 2px solid #5E2BB8;
            padding-bottom: 10px;
        }
        h2 {
            color: #5E2BB8;
            margin-top: 30px;
            border-left: 5px solid #5E2BB8;
            padding-left: 10px;
        }
        h3 {
            color: #2c3e50;
            margin-top: 20px;
        }
        /* 인라인 코드 (본문 중간) */
        code {
            background-color: #eee;
            padding: 2px 5px;
            border-radius: 3px;
            font-family: Consolas, monospace;
            color: #c7254e; /* 가독성 좋은 붉은색 계열 */
        }
        
        /* 코드 블록 (검정 배경) */
        pre {
            background-color: #2d2d2d;
            color: #f8f8f2;
            padding: 15px;
            border-radius: 5px;
            overflow-x: auto;
            font-family: Consolas, monospace;
        }
        
        /* 코드 블록 내부의 코드 */
        pre code {
            background-color: transparent;
            color: #f8f8f2;
            padding: 0;
        }
        ul {
            list-style-type: disc;
            padding-left: 20px;
        }
        li {
            margin-bottom: 5px;
        }
        .container {
            background-color: #fff;
            padding: 30px;
            border-radius: 8px;
            box-shadow: 0 2px 10px rgba(0,0,0,0.1);
        }
        .section {
            margin-bottom: 40px;
        }
        .meta-info {
            background-color: #eef2f5;
            padding: 15px;
            border-radius: 5px;
            margin-bottom: 15px;
        }
        .meta-info strong {
            color: #2c3e50;
        }
    </style>
</head>
<body>
    <div class="container">
        <h1>뉴스레터 발송 프로세스 상세 가이드</h1>
        <p>이 문서는 하나투어 뉴스레터 시스템의 데일리, 주간, 월간 발송 프로세스의 상세 흐름을 설명합니다.</p>

        <div class="section">
            <h2>📂 실행 파일 및 프로젝트 구조</h2>
            <pre><code>mailbox/
├── main.py                     # [메인] 스케줄러 실행 파일 (데일리/주간/월간 통합 제어)
├── newsletter_system.py        # [데일리] 뉴스레터 생성 및 발송 시스템
├── weekly_generator.py         # [주간] 주간 뉴스레터 생성기 *(개발 예정)
├── monthly_generator.py        # [월간] 월간 뉴스레터 생성기 *(개발 예정)
├── news_collector_working.py   # [공통] 뉴스 수집 모듈
├── news_summarizer.py          # [공통] AI 요약 및 큐레이션 모듈
├── email_sender.py             # [공통] 이메일 발송 모듈
├── archiver.py                 # [공통] 아카이빙 모듈
├── date_utils.py               # [유틸] 날짜 계산 유틸리티
├── run_newsletter.bat          # [실행] 윈도우 배치 실행 스크립트
└── archives/                   # [데이터] 아카이브 저장소
    ├── daily/                  # 데일리 뉴스 (JSON/HTML)
    ├── weekly/                 # 주간 뉴스레터 (HTML) *(개발 예정)
    └── monthly/                # 월간 뉴스레터 (HTML) *(개발 예정)</code></pre>
        </div>

        <div class="section">
            <h2>1. 데일리 뉴스레터 (Daily Newsletter)</h2>
            <div class="meta-info">
                <p><strong>목적:</strong> 매일 발생하는 최신 IT, AI, 여행 관련 뉴스를 신속하게 수집하고 요약하여 전달합니다.</p>
                <p><strong>실행 주기:</strong> 담당자가 지정한 시간 (Windows 작업 스케줄러 기준)</p>
                <p><strong>실행 파일:</strong> <code>newsletter_system.py</code> (직접 실행 시) 또는 <code>run_newsletter.bat</code></p>
            </div>

            <h3>🔄 프로세스 흐름</h3>
            <ol>
                <li><strong>뉴스 수집 (Collection)</strong>
                    <ul>
                        <li><strong>담당:</strong> <code>WorkingNewsCollector</code></li>[주간] 주간 뉴스레터 생성기
                        <li><strong>동작:</strong> 네이버 뉴스 API/크롤링을 통해 설정된 키워드(IT, AI, 여행 등)에 대한 최신 뉴스를 검색합니다.</li>
                        <li><strong>필터링:</strong> 제목 기준 중복 제거, 관련성 낮은 기사 제외, 최신순 정렬.</li>
                    </ul>
                </li>
                <li><strong>AI 요약 (Summarization)</strong>
                    <ul>
                        <li><strong>담당:</strong> <code>NewsSummarizerV2</code> (GPT-4o-mini)</li>
                        <li><strong>동작:</strong>
                            <ul>
                                <li><strong>페르소나 적용:</strong> 하나투어 IT 전략 기획자 관점에서 뉴스 재해석.</li>
                                <li><strong>통합 요약:</strong> 주제별 흐름을 읽을 수 있는 스토리텔링형 요약.</li>
                                <li><strong>뉴스 카드:</strong> 각 뉴스별 배지(Badge), 인사이트(Insight), 핵심 요약 제공.</li>
                                <li><strong>배지 시스템:</strong> Innovation, Industry Analysis, Future Tech, Market Power 분류.</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><strong>콘텐츠 생성 및 발송 (Generation & Sending)</strong>
                    <ul>
                        <li><strong>담당:</strong> <code>NewsletterSystem</code>, <code>EmailSender</code></li>
                        <li><strong>동작:</strong> 수집/요약된 데이터를 HTML 템플릿에 매핑하여 이메일을 발송합니다.</li>
                        <li><strong>제목:</strong> <code>[IT본부] 하나투어 뉴스레터</code></li>
                    </ul>
                </li>
                <li><strong>아카이빙 (Archiving)</strong>
                    <ul>
                        <li><strong>담당:</strong> <code>Archiver</code></li>
                        <li><strong>저장 위치:</strong>
                            <ul>
                                <li>데이터: <code>archives/daily/{YYYY}/{MM}/daily_news_{YYYYMMDD}.json</code> (주간/월간 생성의 원천 데이터)</li>
                                <li>화면: <code>archives/daily/{YYYY}/{MM}/daily_newsletter_{YYYYMMDD}.html</code></li>
                            </ul>
                        </li>
                    </ul>
                </li>
            </ol>
        </div>

        <div class="section">
            <h2>2. 주간 뉴스레터 (Weekly Newsletter) - 개발 예정</h2>
            <div class="meta-info">
                <p><strong>목적:</strong> 지난 한 주간 축적된 데일리 뉴스를 기반으로, AI가 중요 뉴스를 선별(Curation)하고 주간 인사이트를 제공합니다.</p>
                <p><strong>실행 주기:</strong> 매주 월요일 09:00</p>
                <p><strong>실행 파일:</strong> <code>main.py</code> (통합 스케줄러) 또는 <code>run_scheduler.bat</code></p>
            </div>

            <h3>🔄 프로세스 흐름</h3>
            <ol>
                <li><strong>데이터 로드 (Data Loading)</strong>
                    <ul>
                        <li><strong>담당:</strong> <code>WeeklyNewsletterGenerator</code></li>
                        <li><strong>동작:</strong> 지난주 월요일 ~ 일요일(7일간)에 생성된 <strong>데일리 JSON 아카이브</strong> 파일들을 모두 읽어옵니다.</li>
                    </ul>
                </li>
                <li><strong>AI 큐레이션 & 인사이트 (Curation & Insight)</strong>
                    <ul>
                        <li><strong>담당:</strong> <code>NewsSummarizer</code></li>
                        <li><strong>동작:</strong>
                            <ul>
                                <li><strong>Top 5 선정:</strong> 단순 나열이 아닌, AI가 중요도/파급력을 판단하여 주제별 상위 5개 뉴스를 선정합니다.</li>
                                <li><strong>Weekly Insight:</strong> 선정된 뉴스를 바탕으로 한 주간의 기술/업계 흐름을 요약한 인사이트 리포트를 작성합니다.</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><strong>발송 (Sending)</strong>
                    <ul>
                        <li><strong>담당:</strong> <code>EmailSender</code></li>
                        <li><strong>제목:</strong> <code>[IT본부] 하나투어 주간 뉴스레터</code> (고정 제목)</li>
                    </ul>
                </li>
                <li><strong>아카이빙 (Archiving)</strong>
                    <ul>
                        <li><strong>저장 위치:</strong> <code>archives/weekly/{YYYY}/weekly_newsletter_{YYYYMMDD}.html</code></li>
                        <li><strong>예시:</strong> <code>archives/weekly/2025/weekly_newsletter_20251222.html</code></li>
                    </ul>
                </li>
            </ol>
        </div>

        <div class="section">
            <h2>3. 월간 뉴스레터 (Monthly Newsletter) - 개발 예정</h2>
            <div class="meta-info">
                <p><strong>목적:</strong> 한 달간의 데이터를 종합 분석하여 거시적인 트렌드 리포트와 Best 뉴스를 전달합니다.</p>
                <p><strong>실행 주기:</strong> 매월 첫 영업일 09:00 (예: 1일이 주말이면 월요일 발송)</p>
                <p><strong>실행 파일:</strong> <code>main.py</code> (통합 스케줄러) 또는 <code>run_scheduler.bat</code></p>
            </div>

            <h3>🔄 프로세스 흐름</h3>
            <ol>
                <li><strong>데이터 로드 (Data Loading)</strong>
                    <ul>
                        <li><strong>담당:</strong> <code>MonthlyNewsletterGenerator</code></li>
                        <li><strong>동작:</strong> 지난달 1일 ~ 말일까지의 모든 <strong>데일리 JSON 아카이브</strong>를 로드합니다.</li>
                    </ul>
                </li>
                <li><strong>트렌드 분석 & Best 선정 (Analysis)</strong>
                    <ul>
                        <li><strong>담당:</strong> <code>NewsSummarizer</code></li>
                        <li><strong>동작:</strong>
                            <ul>
                                <li><strong>Monthly Trend Report:</strong> '이달의 핵심 이슈', '기술 트렌드 변화', '여행 산업 동향', 'Next Month 전망' 4가지 관점의 심층 보고서를 생성합니다.</li>
                                <li><strong>Best of Best:</strong> 한 달 전체 뉴스 중 가장 영향력 있었던 3~5개의 뉴스를 엄선합니다.</li>
                            </ul>
                        </li>
                    </ul>
                </li>
                <li><strong>발송 (Sending)</strong>
                    <ul>
                        <li><strong>담당:</strong> <code>EmailSender</code></li>
                        <li><strong>제목:</strong> <code>[IT본부] 하나투어 월간 뉴스레터 ({N}월)</code></li>
                    </ul>
                </li>
                <li><strong>아카이빙 (Archiving)</strong>
                    <ul>
                        <li><strong>저장 위치:</strong> <code>archives/monthly/{YYYY}/monthly_newsletter_{YYYYMM}.html</code></li>
                        <li><strong>예시:</strong> <code>archives/monthly/2025/monthly_newsletter_202512.html</code></li>
                    </ul>
                </li>
            </ol>
        </div>
    </div>
</body>
</html>
