# 뉴스 수집 로직 변경 보고서 (월요일 예외 처리)

## 개요

월요일 뉴스레터 발송 시, 전날(일요일) 뉴스만 수집할 경우 뉴스량이 부족하여 "수집된 뉴스가 없습니다"라는 메시지가 발생하는 문제를 해결하기 위해, 월요일에는 **토요일~일요일(2일간)**의 뉴스를 수집하도록 로직을 변경했습니다.

## 변경 사항

### 1. `news_collector_working.py`

- **`get_target_search_date()` 메서드 추가**:
  - 오늘이 **월요일(0)**인 경우: `토요일날짜~일요일날짜` (예: `20260110~20260111`) 형식의 범위 문자열 반환
  - 그 외 요일인 경우: `전날짜` (예: `20260111`) 반환
- **`get_date_range_for_search()` 메서드 업데이트**:
  - `~` 문자가 포함된 범위 문자열을 파싱하여 `start_date`, `end_date`, `after`, `before` 값을 설정하도록 수정
- **`validate_news_date()` 메서드 업데이트**:
  - 범위 문자열이 전달된 경우, 해당 범위 내(±1일 여유)에 뉴스가 발행되었는지 검증하는 로직 추가
- **`filter_invalid_dates()` 메서드 업데이트**:
  - 범위 문자열이 전달된 경우, 해당 범위 내의 뉴스만 필터링하도록 수정

### 2. `newsletter_system.py`

- 뉴스 수집 시 `get_yesterday_date()` 대신 **`get_target_search_date()`**를 호출하도록 변경하여 월요일 예외 처리가 적용되도록 함

### 3. `test_newsletter_v2.py`

- 테스트 스크립트도 동일하게 변경된 로직을 사용하도록 업데이트

## 검증 결과

- 현재 날짜(월요일) 기준 테스트 실행 시, `2026-01-10 ~ 2026-01-11` (토~일) 범위로 구글 뉴스 검색 및 수집이 정상적으로 이루어짐을 확인했습니다.
